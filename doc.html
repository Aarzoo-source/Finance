<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Centroid Solutions Test</title>
<style>
  body {
    font-family: 'Andalus', Arial, sans-serif;
    font-size: 18px;
    max-width: 700px;
    margin: auto;
    padding: 1rem;
    background-color: #f9f9f9;
  }
  h1 {
    text-align: center;
  }
  .timer {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    text-align: center;
  }
  .warning {
    color: red;
    font-weight: bold;
    text-align: center;
    margin: 1rem 0;
  }
  .test-container {
    max-width: 16cm;
  }
  .question-container {
    display: none;
    margin-bottom: 4rem; /* room for buttons below */
  }
  .question-container.active {
    display: block;
  }
  .question-text {
    background-color: rgb(108, 195, 224);
    padding: 10px 15px;
    border-radius: 10px;
    font-weight: bold;
    color: #000;
    height: 1cm;
    margin-bottom: 8px;
    text-align: left; /* extreme left */
  }
  textarea, select {
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 18px;
    font-family: 'Andalus', Arial, sans-serif;
    width: 16cm;
  }
  textarea {
    height: 3cm;
  }
  select {
    height: 1cm;
  }
  .button-container {
    position: relative;
    height: 3rem;
  }
  .button-container button {
    background-color: rgb(108, 195, 224);
    border: none;
    color: white;
    padding: 10px 20px;
    font-size: 1.2rem;
    border-radius: 8px;
    cursor: pointer;
    position: absolute;
    bottom: 0;
    top: auto;
  }
  #prevBtn {
    left: 0;
  }
  #nextBtn {
    left: calc(0 + 8cm + 120px); /* 8cm gap + width of Previous button */
  }
  #prevBtn:disabled,
  #nextBtn:disabled {
    background-color: #bbb;
    cursor: not-allowed;
  }
</style>
</head>
<body>

<h1>Centroid Solutions Test</h1>
<div class="timer" id="timer">Time Left: 05:00</div>
<div class="warning" id="warning" style="display:none;"></div>

<form id="testForm" class="test-container">

  <div class="question-container active" data-index="0">
    <div class="question-text">1. What is the primary function of the Federal Reserve?</div>
    <textarea id="q1" rows="5" ></textarea>
    <div class="button-container">
      <button type="button" id="prevBtn" disabled>Previous</button>
      <button type="button" id="nextBtn">Next</button>
    </div>
  </div>

  <div class="question-container" data-index="1">
    <div class="question-text">2. Which financial statement shows a company's assets and liabilities?</div>
    <select id="q2" >
      <option value="" disabled selected>Select an option</option>
      <option value="Income Statement">Income Statement</option>
      <option value="Balance Sheet">Balance Sheet</option>
      <option value="Cash Flow Statement">Cash Flow Statement</option>
    </select>
    <div class="button-container">
      <button type="button" id="prevBtn" >Previous</button>
      <button type="button" id="nextBtn">Next</button>
    </div>
  </div>

  <div class="question-container" data-index="2">
    <div class="question-text">3. Explain the difference between a stock and a bond.</div>
    <textarea id="q3" rows="5" ></textarea>
    <div class="button-container">
      <button type="button" id="prevBtn" >Previous</button>
      <button type="button" id="nextBtn">Submit</button>
    </div>
  </div>

</form>

<script>
(() => {
  const timerEl = document.getElementById('timer');
  const warningEl = document.getElementById('warning');
  const form = document.getElementById('testForm');

  const questions = document.querySelectorAll('.question-container');
  let currentQuestionIndex = 0;

  // Because buttons are duplicated in each question, use event delegation on form
  form.addEventListener('click', (e) => {
    if (e.target.tagName !== 'BUTTON') return;
    if (e.target.id === 'prevBtn') {
      if(currentQuestionIndex > 0) {
        showQuestion(currentQuestionIndex - 1);
      }
    } else if (e.target.id === 'nextBtn') {
      if(currentQuestionIndex < questions.length - 1) {
        showQuestion(currentQuestionIndex + 1);
      } else {
        submitTest('Manual submission');
      }
    }
  });

  function showQuestion(index) {
    questions.forEach((q, i) => {
      q.classList.toggle('active', i === index);
      // Enable or disable previous button inside question
      const prevBtn = q.querySelector('#prevBtn');
      const nextBtn = q.querySelector('#nextBtn');
      if(prevBtn) prevBtn.disabled = (index === 0);
      if(nextBtn) nextBtn.textContent = (index === questions.length -1) ? 'Submit' : 'Next';
    });
    currentQuestionIndex = index;
  }

  function submitTest(reason) {
    // Just a placeholder alert for now
    alert('Test submitted! Reason: ' + reason);
    // Here you can put your actual submit code later
  }

  showQuestion(0);
})();
</script>

</body>
</html>
